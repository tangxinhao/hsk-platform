<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-info-section" wx:if="{{hasUserInfo}}">
    <view class="greeting">
      <text>ä½ å¥½ï¼Œ{{userInfo.nickName}}ï¼</text>
      <text class="welcome-text">æ¬¢è¿ä½¿ç”¨HSKå­¦ä¹ åŠ©æ‰‹</text>
    </view>
    <image class="avatar" src="{{userInfo.avatarUrl}}"></image>
  </view>
  <view class="user-info-section" wx:else>
    <view class="greeting">
      <text>æ¬¢è¿ä½¿ç”¨HSKå­¦ä¹ åŠ©æ‰‹</text>
      <text class="welcome-text">ç™»å½•è·å–æ›´å¤šä¸ªæ€§åŒ–å­¦ä¹ ä½“éªŒ</text>
    </view>
    <button wx:if="{{canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo" class="login-btn">ç™»å½•</button>
  </view>
  
  <!-- ä»Šæ—¥ç›®æ ‡ -->
  <view class="today-goal-card">
    <view class="goal-header">
      <text class="goal-title">ä»Šæ—¥å­¦ä¹ ç›®æ ‡</text>
      <text class="goal-subtitle">æ¯æ—¥åšæŒï¼Œç¨³æ­¥æé«˜</text>
    </view>
    <view class="goal-progress-container">
      <view class="goal-progress-circle">
        <text class="goal-percentage">{{dailyGoal.percentage}}%</text>
        <text class="goal-time">{{dailyGoal.completed}}/{{dailyGoal.minutes}}åˆ†é’Ÿ</text>
      </view>
      <view class="goal-bar">
        <view class="goal-bar-inner" style="width: {{dailyGoal.percentage}}%"></view>
      </view>
    </view>
  </view>
  
  <!-- å­¦ä¹ æç¤º -->
  <view class="study-tip-container">
    <text class="tip-icon">ğŸ’¡</text>
    <view class="tip-content">
      <text class="study-tip">{{studyTips[currentTip]}}</text>
    </view>
  </view>
  
  <!-- ä¸»è¦åŠŸèƒ½å…¥å£ -->
  <view class="section-header">
    <text class="section-title">å­¦ä¹ åŠŸèƒ½</text>
  </view>
  
  <view class="entrance-section">
    <view class="entrance-item" wx:for="{{entranceList}}" wx:key="id" bindtap="navigateTo" data-url="{{item.url}}">
      <text class="entrance-icon">{{index + 1}}</text>
      <text>{{item.title}}</text>
    </view>
  </view>
  
  <!-- å­¦ä¹ ç»Ÿè®¡ -->
  <view class="section-header">
    <text class="section-title">å­¦ä¹ ç»Ÿè®¡</text>
  </view>
  
  <view class="stats-container">
    <view class="stat-item">
      <text class="stat-value">{{learningStats.totalTime}}</text>
      <text class="stat-label">å­¦ä¹ æ—¶é•¿(å°æ—¶)</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{learningStats.daysStreak}}</text>
      <text class="stat-label">è¿ç»­å­¦ä¹ (å¤©)</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{learningStats.wordsLearned}}</text>
      <text class="stat-label">å·²å­¦è¯æ±‡</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{learningStats.exercisesCompleted}}</text>
      <text class="stat-label">å®Œæˆç»ƒä¹ </text>
    </view>
  </view>
  
  <!-- æœ€è¿‘å­¦ä¹  -->
  <view class="section-header">
    <text class="section-title">æœ€è¿‘å­¦ä¹ </text>
    <text class="more-link" bindtap="viewAllLearning">æŸ¥çœ‹å…¨éƒ¨</text>
  </view>
  
  <view class="recent-list">
    <view class="recent-item card" wx:for="{{recentLearning}}" wx:key="id" bindtap="navigateTo" data-url="/pages/learning/continue?id={{item.id}}">
      <text class="recent-icon">ğŸ“š</text>
      <view class="recent-info">
        <text class="recent-title">{{item.title}}</text>
        <text class="recent-time">ä¸Šæ¬¡å­¦ä¹ ï¼š{{item.lastTime}}</text>
        <view class="progress-bar">
          <view class="progress-inner" style="width: {{item.progress}}%"></view>
        </view>
        <text class="progress-text">å®Œæˆ{{item.progress}}%</text>
      </view>
    </view>
  </view>
</view> 