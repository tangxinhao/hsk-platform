import{_ as te,r as b,a as ie,v as Z,x as oe,i as ne,y as ae,z as se,A as re,B as de,C as ue,D as ge,F as pe,b as c,G as ce,o as u,c as f,e as t,w as n,j as T,E as Q,H as W,I as me,d as r,g,J as D,K as B,L as F,t as v,M as x,N as fe}from"./index-e5bf8409.js";const _e={name:"QuestionPage",setup(){const K=b([]),l=b(!1),O=b(!1),e=b(!1),k=b(null),H=b(""),_=b(""),S=b(""),C=b(""),y=b(1),d=b(10),p=b([]),j=["reading","writing","fill","single","multiple","judge"],w={reading:"é˜…è¯»é¢˜",writing:"ä¹¦å†™é¢˜",fill:"å¡«ç©ºé¢˜",single:"å•é€‰é¢˜",multiple:"å¤šé€‰é¢˜",judge:"åˆ¤æ–­é¢˜"},s=ie({id:null,type:"",content:"",level:1,answer:"",options:"[]",option_type:"text",explanation:"",audio_url:"",audio_duration:0,audio_group:"",image_url:"",passage:"",passage_title:"",sub_questions:null,matching_pairs:null,ordering_items:null,tags:null,points:0,time_limit:0,category:null,question_set:null,difficulty:3}),U={type:[{required:!0,message:"è¯·é€‰æ‹©é¢˜ç›®ç±»åž‹",trigger:"change"}],content:[{required:!0,message:"è¯·è¾“å…¥é¢˜ç›®å†…å®¹",trigger:"blur"},{min:2,max:1e3,message:"é•¿åº¦åœ¨ 2 åˆ° 1000 ä¸ªå­—ç¬¦ä¹‹é—´",trigger:"blur"}],level:[{required:!0,message:"è¯·é€‰æ‹©HSKç­‰çº§",trigger:"change"},{type:"number",min:1,max:6,message:"HSKç­‰çº§åœ¨ 1-6 ä¹‹é—´",trigger:"change"}],difficulty:[{required:!0,message:"è¯·é€‰æ‹©éš¾åº¦ç³»æ•°",trigger:"change"},{type:"number",min:1,max:5,message:"éš¾åº¦ç³»æ•°åœ¨ 1-5 ä¹‹é—´",trigger:"change"}],answer:[{required:!0,message:"è¯·è¾“å…¥æ­£ç¡®ç­”æ¡ˆ",trigger:"blur"}]},A=Z(()=>{let o=K.value;return H.value&&(o=o.filter(a=>a.content.toLowerCase().includes(H.value.toLowerCase()))),_.value&&(o=o.filter(a=>a.type===_.value)),S.value!==""&&S.value!==null&&(o=o.filter(a=>a.level===S.value)),C.value!==""&&C.value!==null&&(o=o.filter(a=>a.difficulty===C.value)),o}),I=Z(()=>{const o=(y.value-1)*d.value,a=o+d.value;return A.value.slice(o,a)});oe(p,o=>{s.options=JSON.stringify(o)});const z=async()=>{l.value=!0,console.log("å¼€å§‹èŽ·å–é¢˜ç›®åˆ—è¡¨");try{const o=await T.getQuestions({page_size:1e4});o.data&&o.data.results?(K.value=o.data.results,console.log("èŽ·å–é¢˜ç›®åˆ—è¡¨æˆåŠŸ:",K.value.length,"/",o.data.count,"é“é¢˜ç›®")):K.value=o.data||[]}catch(o){console.error("èŽ·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥:",o),Q.error("èŽ·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥")}finally{l.value=!1}},P=()=>{z(),Q.success("åˆ·æ–°æˆåŠŸ")},N=o=>{o.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23f5f5f5" width="100" height="100"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3EåŠ è½½å¤±è´¥%3C/text%3E%3C/svg%3E'},h=()=>{Object.assign(s,{id:null,type:"",content:"",level:1,answer:"",options:"[]",option_type:"text",explanation:"",audio_url:"",audio_duration:0,audio_group:"",image_url:"",passage:"",passage_title:"",sub_questions:null,matching_pairs:null,ordering_items:null,tags:null,points:0,time_limit:0,category:null,question_set:null,difficulty:3}),p.value=[],e.value=!0,W(()=>{k.value&&k.value.clearValidate()})},E=o=>{Object.assign(s,{...o}),s.option_type||(s.option_type="text"),(!s.difficulty||s.difficulty<1||s.difficulty>5)&&(s.difficulty=3);try{let a=s.options;typeof a=="string"&&(a=JSON.parse(a||"[]")),a&&typeof a=="object"&&a.options&&Array.isArray(a.options)?p.value=a.options.map(q=>q.text||q.label||""):Array.isArray(a)?p.value=a:p.value=[]}catch(a){console.error("è§£æžé€‰é¡¹å¤±è´¥:",a,s.options),p.value=[]}e.value=!0,W(()=>{k.value&&k.value.clearValidate()})},L=async o=>{try{await me.confirm("ç¡®å®šè¦åˆ é™¤è¯¥é¢˜ç›®å—ï¼Ÿåˆ é™¤åŽæ— æ³•æ¢å¤ï¼","è­¦å‘Š",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),l.value=!0,await T.deleteQuestion(o),Q.success("åˆ é™¤é¢˜ç›®æˆåŠŸ"),await z()}catch(a){a!=="cancel"&&(console.error("åˆ é™¤é¢˜ç›®å¤±è´¥:",a),Q.error("åˆ é™¤é¢˜ç›®å¤±è´¥"))}finally{l.value=!1}},R=()=>{p.value.push("")},M=o=>{Array.isArray(p.value)||(p.value=Array.from(p.value||[])),p.value.splice(o,1)},J=async()=>{if(k.value)try{if(await k.value.validate(),p.value.some(a=>a==="")){Q.warning("é€‰é¡¹å†…å®¹ä¸èƒ½ä¸ºç©º");return}const o={type:s.type,content:s.content,level:parseInt(s.level)||1,answer:s.answer,options:JSON.stringify(p.value),option_type:s.option_type||"text",explanation:s.explanation||"",audio_url:s.audio_url||"",audio_duration:parseInt(s.audio_duration)||0,audio_group:s.audio_group||"",image_url:s.image_url||"",passage:s.passage||"",passage_title:s.passage_title||"",sub_questions:s.sub_questions||null,matching_pairs:s.matching_pairs||null,ordering_items:s.ordering_items||null,tags:s.tags||null,points:parseInt(s.points)||0,time_limit:parseInt(s.time_limit)||0,category:s.category||null,question_set:s.question_set||null,difficulty:parseInt(s.difficulty)||3};Object.keys(o).forEach(a=>{(o[a]===null||o[a]===void 0||o[a]==="")&&(["explanation","audio_url","image_url","passage","passage_title"].includes(a)||delete o[a])}),console.log("æäº¤å®Œæ•´æ•°æ®:",o),O.value=!0,s.id?(await T.updateQuestion(s.id,o),Q.success("âœ… é¢˜ç›®æ›´æ–°æˆåŠŸï¼æ‰€æœ‰å­—æ®µå·²ä¿å­˜")):(await T.createQuestion(o),Q.success("âœ… é¢˜ç›®åˆ›å»ºæˆåŠŸï¼"),H.value="",_.value="",S.value="",C.value="",y.value=1),e.value=!1,await z()}catch(o){console.error("ä¿å­˜é¢˜ç›®å¤±è´¥:",o),Q.error("ä¿å­˜é¢˜ç›®å¤±è´¥")}finally{O.value=!1}},G=()=>{y.value=1},i=()=>{H.value="",_.value="",S.value="",C.value="",y.value=1,Q.success("å·²æ¸…ç©ºæ‰€æœ‰ç­›é€‰å™¨")},m=o=>{y.value=o},V=o=>{d.value=o,y.value=1},X=o=>({å•é€‰é¢˜:"success",å¤šé€‰é¢˜:"warning",åˆ¤æ–­é¢˜:"info",å¡«ç©ºé¢˜:"danger",è¿žçº¿é¢˜:"primary",é˜…è¯»ç†è§£é¢˜:"primary"})[o]||"info",Y=o=>({1:"ç®€å•",2:"è¾ƒæ˜“",3:"ä¸­ç­‰",4:"è¾ƒéš¾",5:"å›°éš¾"})[o]||"ä¸­ç­‰",$=o=>({reading:"é˜…è¯»é¢˜ - åŒ…å«æ‰€æœ‰é˜…è¯»ç›¸å…³é¢˜åž‹ï¼Œå¯é…åˆæ–‡ç« /å¯¹è¯å†…å®¹ä½¿ç”¨",writing:"ä¹¦å†™é¢˜ - åŒ…å«ç»„å¥ã€æ±‰å­—å¡«ç©ºã€ä½œæ–‡ç­‰ä¹¦å†™ç›¸å…³é¢˜åž‹",fill:"å¡«ç©ºé¢˜ - éœ€è¦å¡«å†™æ­£ç¡®ç­”æ¡ˆçš„é¢˜ç›®ï¼ŒåŒ…æ‹¬å®Œå½¢å¡«ç©ºç­‰",single:"å•é€‰é¢˜ - ä»Žå¤šä¸ªé€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆï¼ŒåŒ…æ‹¬çœ‹å›¾é€‰æ‹©ã€åŒ¹é…é¢˜ç­‰",multiple:"å¤šé€‰é¢˜ - å¯ä»¥é€‰æ‹©å¤šä¸ªæ­£ç¡®ç­”æ¡ˆ",judge:"åˆ¤æ–­é¢˜ - åˆ¤æ–­å¯¹é”™"})[o]||"è¯·é€‰æ‹©é¢˜ç›®ç±»åž‹ï¼ˆå¬åŠ›é¢˜è¯·ä½¿ç”¨å¬åŠ›é¢˜ç»„ç®¡ç†ï¼‰",ee=o=>{["image_choice","image_description"].includes(o)&&(s.image_url=s.image_url||""),["passage_reading","cloze"].includes(o)&&(s.passage=s.passage||"",s.passage_title=s.passage_title||"")},le=o=>{if(!o)return[];try{const a=typeof o=="string"?JSON.parse(o):o;return a&&typeof a=="object"&&a.options&&Array.isArray(a.options)?a.options.map(q=>q.text||q.label||q.value||""):Array.isArray(a)?a:[]}catch(a){return console.error("è§£æžé€‰é¡¹å¤±è´¥:",a,o),[]}};return ne(()=>{z()}),{questions:K,filteredQuestions:A,paginatedQuestions:I,loading:l,submitting:O,dialogVisible:e,editingQuestion:s,formRules:U,questionFormRef:k,searchKeyword:H,typeFilter:_,levelFilter:S,difficultyFilter:C,currentPage:y,pageSize:d,parsedOptions:p,questionTypes:j,typeLabels:w,fetchQuestions:z,refreshQuestions:P,showAddDialog:h,editQuestion:E,deleteQuestion:L,addOption:R,removeOption:M,submitForm:J,handleSearch:G,clearAllFilters:i,handleCurrentChange:m,handleSizeChange:V,getTagType:X,getDifficultyText:Y,getTypeDescription:$,handleTypeChange:ee,parseOptionsForDisplay:le,Plus:ae,Edit:se,Delete:re,Search:de,Refresh:ue,Headset:ge,ZoomIn:pe,handleImageError:N}}},ye={class:"question-page"},ve={class:"card-header"},he={class:"header-actions"},be={class:"filter-container"},xe={key:0},we={key:1},Ve={key:2},Ce={key:3},Qe={key:0},ke={key:1},Se={key:1},Fe={class:"pagination-container"},Ke={style:{"margin-top":"8px",padding:"8px",background:"#f0f9ff","border-radius":"4px","font-size":"12px",color:"#1890ff"}},ze=["src"],He={class:"difficulty-selector"},qe={class:"difficulty-text"},De={style:{"font-size":"12px",color:"#909399","margin-top":"4px"}},Ae={key:0},Oe={key:1,style:{"line-height":"1.8"}},Ue={class:"options-container"},Ie={style:{display:"flex","align-items":"flex-start",gap:"10px",width:"100%"}},Ee={class:"option-label"},Te={key:0,style:{"margin-top":"8px","margin-left":"30px"}},Be={class:"preview-thumbnail"},je=["src"],Pe={class:"preview-overlay"},Ne={class:"preview-large"},Le=["src"],Re={class:"dialog-footer"};function Me(K,l,O,e,k,H){const _=c("el-button"),S=c("Headset"),C=c("el-icon"),y=c("el-input"),d=c("el-option"),p=c("el-select"),j=c("el-alert"),w=c("el-table-column"),s=c("el-tag"),U=c("el-tooltip"),A=c("el-rate"),I=c("el-popover"),z=c("el-table"),P=c("el-pagination"),N=c("el-card"),h=c("el-form-item"),E=c("el-radio"),L=c("el-radio-group"),R=c("ZoomIn"),M=c("el-form"),J=c("el-dialog"),G=ce("loading");return u(),f("div",ye,[t(N,{class:"box-card"},{header:n(()=>[r("div",ve,[l[20]||(l[20]=r("h3",null,"é¢˜ç›®ç®¡ç†",-1)),r("div",he,[t(_,{type:"success",onClick:e.refreshQuestions,icon:e.Refresh},{default:n(()=>l[17]||(l[17]=[g("åˆ·æ–°")])),_:1,__:[17]},8,["onClick","icon"]),t(_,{type:"warning",onClick:l[0]||(l[0]=i=>K.$router.push("/listening-groups"))},{default:n(()=>[t(C,null,{default:n(()=>[t(S)]),_:1}),l[18]||(l[18]=g(" å¬åŠ›é¢˜ç»„ç®¡ç† "))]),_:1,__:[18]}),t(_,{type:"primary",onClick:e.showAddDialog,icon:e.Plus},{default:n(()=>l[19]||(l[19]=[g("æ–°å¢žé¢˜ç›®")])),_:1,__:[19]},8,["onClick","icon"])])])]),default:n(()=>[r("div",be,[t(y,{modelValue:e.searchKeyword,"onUpdate:modelValue":l[1]||(l[1]=i=>e.searchKeyword=i),placeholder:"æœç´¢é¢˜ç›®å†…å®¹",class:"search-input","prefix-icon":e.Search,clearable:"",onInput:e.handleSearch},null,8,["modelValue","prefix-icon","onInput"]),t(p,{modelValue:e.typeFilter,"onUpdate:modelValue":l[2]||(l[2]=i=>e.typeFilter=i),placeholder:"é¢˜ç›®ç±»åž‹",clearable:"",onChange:e.handleSearch},{default:n(()=>[t(d,{label:"å…¨éƒ¨",value:""}),(u(!0),f(D,null,B(e.questionTypes,i=>(u(),F(d,{key:i,label:i,value:i},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(p,{modelValue:e.levelFilter,"onUpdate:modelValue":l[3]||(l[3]=i=>e.levelFilter=i),placeholder:"HSKç­‰çº§",clearable:"",onChange:e.handleSearch},{default:n(()=>[t(d,{label:"å…¨éƒ¨",value:""}),t(d,{label:"HSK 1çº§",value:1}),t(d,{label:"HSK 2çº§",value:2}),t(d,{label:"HSK 3çº§",value:3}),t(d,{label:"HSK 4çº§",value:4}),t(d,{label:"HSK 5çº§",value:5}),t(d,{label:"HSK 6çº§",value:6})]),_:1},8,["modelValue","onChange"]),t(p,{modelValue:e.difficultyFilter,"onUpdate:modelValue":l[4]||(l[4]=i=>e.difficultyFilter=i),placeholder:"éš¾åº¦ç³»æ•°",clearable:"",onChange:e.handleSearch},{default:n(()=>[t(d,{label:"å…¨éƒ¨",value:""}),t(d,{label:"â­ ç®€å•",value:1}),t(d,{label:"â­â­ è¾ƒæ˜“",value:2}),t(d,{label:"â­â­â­ ä¸­ç­‰",value:3}),t(d,{label:"â­â­â­â­ è¾ƒéš¾",value:4}),t(d,{label:"â­â­â­â­â­ å›°éš¾",value:5})]),_:1},8,["modelValue","onChange"])]),e.questions.length>0&&e.filteredQuestions.length===0?(u(),F(j,{key:0,type:"warning",title:"ç­›é€‰å™¨è¿‡æ»¤æç¤º",closable:!1,style:{"margin-bottom":"15px"}},{default:n(()=>[r("p",null,[l[21]||(l[21]=g("å½“å‰æœ‰ ")),r("strong",null,v(e.questions.length),1),l[22]||(l[22]=g(" é“é¢˜ç›®ï¼Œä½†ç­›é€‰å™¨è¿‡æ»¤åŽä¸º ")),l[23]||(l[23]=r("strong",null,"0",-1)),l[24]||(l[24]=g(" é“"))]),l[26]||(l[26]=r("p",null,"å½“å‰ç­›é€‰æ¡ä»¶ï¼š",-1)),r("ul",null,[e.searchKeyword?(u(),f("li",xe,"æœç´¢å…³é”®è¯ï¼š"+v(e.searchKeyword),1)):x("",!0),e.typeFilter?(u(),f("li",we,"é¢˜ç›®ç±»åž‹ï¼š"+v(e.typeFilter),1)):x("",!0),e.levelFilter?(u(),f("li",Ve,"HSKç­‰çº§ï¼š"+v(e.levelFilter)+"çº§",1)):x("",!0),e.difficultyFilter?(u(),f("li",Ce,"éš¾åº¦ç³»æ•°ï¼š"+v(e.difficultyFilter)+"æ˜Ÿ",1)):x("",!0)]),t(_,{type:"primary",size:"small",onClick:e.clearAllFilters,style:{"margin-top":"10px"}},{default:n(()=>l[25]||(l[25]=[g("æ¸…ç©ºæ‰€æœ‰ç­›é€‰å™¨")])),_:1,__:[25]},8,["onClick"])]),_:1})):x("",!0),fe((u(),F(z,{data:e.paginatedQuestions,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:n(()=>[t(w,{prop:"id",label:"ID",width:"80",sortable:""}),t(w,{prop:"type",label:"ç±»åž‹",width:"120"},{default:n(({row:i})=>[t(s,{type:e.getTagType(i.type)},{default:n(()=>[g(v(i.type),1)]),_:2},1032,["type"])]),_:1}),t(w,{prop:"content",label:"é¢˜ç›®å†…å®¹","min-width":"250"},{default:n(({row:i})=>[t(U,{content:i.content,placement:"top",disabled:i.content.length<30},{default:n(()=>[r("div",null,v(i.content.length>30?i.content.substring(0,30)+"...":i.content),1)]),_:2},1032,["content","disabled"])]),_:1}),t(w,{prop:"level",label:"HSKç­‰çº§",width:"100"},{default:n(({row:i})=>[t(s,{type:"success"},{default:n(()=>[g("HSK "+v(i.level)+"çº§",1)]),_:2},1024)]),_:1}),t(w,{prop:"difficulty",label:"éš¾åº¦",width:"120"},{default:n(({row:i})=>[t(A,{modelValue:i.difficulty,"onUpdate:modelValue":m=>i.difficulty=m,max:5,disabled:"","show-score":"","text-color":"#ff9900",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(w,{prop:"answer",label:"ç­”æ¡ˆ","min-width":"150"},{default:n(({row:i})=>[t(U,{content:i.answer,placement:"top",disabled:i.answer.length<20},{default:n(()=>[r("div",null,v(i.answer.length>20?i.answer.substring(0,20)+"...":i.answer),1)]),_:2},1032,["content","disabled"])]),_:1}),t(w,{prop:"options",label:"é€‰é¡¹","min-width":"200"},{default:n(({row:i})=>[t(I,{placement:"right",trigger:"hover",width:"300"},{reference:n(()=>[t(_,{link:"",type:"primary"},{default:n(()=>l[27]||(l[27]=[g("æŸ¥çœ‹é€‰é¡¹")])),_:1,__:[27]})]),default:n(()=>[i.options&&i.options.length>0?(u(),f("div",Qe,[e.parseOptionsForDisplay(i.options).length>0?(u(!0),f(D,{key:0},B(e.parseOptionsForDisplay(i.options),(m,V)=>(u(),f("p",{key:V},v(["A","B","C","D"][V]||V)+": "+v(m),1))),128)):(u(),f("div",ke,"é€‰é¡¹æ ¼å¼é”™è¯¯"))])):(u(),f("div",Se,"æ— é€‰é¡¹"))]),_:2},1024)]),_:1}),t(w,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:n(i=>[t(_,{size:"small",type:"primary",onClick:m=>e.editQuestion(i.row),icon:e.Edit},{default:n(()=>l[28]||(l[28]=[g("ç¼–è¾‘")])),_:2,__:[28]},1032,["onClick","icon"]),t(_,{size:"small",type:"danger",onClick:m=>e.deleteQuestion(i.row.id),icon:e.Delete},{default:n(()=>l[29]||(l[29]=[g("åˆ é™¤")])),_:2,__:[29]},1032,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[G,e.loading]]),r("div",Fe,[e.filteredQuestions.length>0?(u(),F(P,{key:0,"current-page":e.currentPage,"page-size":e.pageSize,total:e.filteredQuestions.length,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange,background:""},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])):x("",!0)])]),_:1}),t(J,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[16]||(l[16]=i=>e.dialogVisible=i),title:e.editingQuestion.id?"ç¼–è¾‘é¢˜ç›®":"æ–°å¢žé¢˜ç›®",width:"700px","close-on-click-modal":!1,"destroy-on-close":""},{footer:n(()=>[r("span",Re,[t(_,{onClick:l[15]||(l[15]=i=>e.dialogVisible=!1)},{default:n(()=>l[39]||(l[39]=[g("å–æ¶ˆ")])),_:1,__:[39]}),t(_,{type:"primary",onClick:e.submitForm,loading:e.submitting},{default:n(()=>l[40]||(l[40]=[g("ä¿å­˜")])),_:1,__:[40]},8,["onClick","loading"])])]),default:n(()=>[t(M,{model:e.editingQuestion,rules:e.formRules,ref:"questionFormRef","label-width":"100px","status-icon":""},{default:n(()=>[t(h,{label:"é¢˜ç›®ç±»åž‹",prop:"type"},{default:n(()=>[t(p,{modelValue:e.editingQuestion.type,"onUpdate:modelValue":l[5]||(l[5]=i=>e.editingQuestion.type=i),placeholder:"è¯·é€‰æ‹©é¢˜ç›®ç±»åž‹",style:{width:"100%"},onChange:e.handleTypeChange},{default:n(()=>[(u(!0),f(D,null,B(e.questionTypes,i=>(u(),F(d,{key:i,label:e.typeLabels[i]||i,value:i},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),r("div",Ke,[l[30]||(l[30]=r("strong",null,"å½“å‰é¢˜åž‹è¯´æ˜Žï¼š",-1)),g(v(e.getTypeDescription(e.editingQuestion.type)),1)])]),_:1}),["image_choice","image_description"].includes(e.editingQuestion.type)?(u(),f(D,{key:0},[t(h,{label:"å›¾ç‰‡URL",prop:"image_url"},{default:n(()=>[t(y,{modelValue:e.editingQuestion.image_url,"onUpdate:modelValue":l[6]||(l[6]=i=>e.editingQuestion.image_url=i),placeholder:"ä¾‹å¦‚ï¼šhttp://localhost:8000/media/images/apple.jpg",maxlength:"500"},{prepend:n(()=>l[31]||(l[31]=[g("ðŸ–¼ï¸")])),_:1},8,["modelValue"]),l[32]||(l[32]=r("div",{style:{"margin-top":"5px","font-size":"12px",color:"#909399"}}," æç¤ºï¼šè¯·å°†å›¾ç‰‡æ–‡ä»¶æ”¾åˆ° backend/media/images/ ç›®å½•ï¼Œç„¶åŽå¡«å†™å®Œæ•´URL ",-1))]),_:1,__:[32]}),e.editingQuestion.image_url?(u(),F(h,{key:0,label:"å›¾ç‰‡é¢„è§ˆ"},{default:n(()=>[r("img",{src:e.editingQuestion.image_url,alt:"é¢˜ç›®å›¾ç‰‡",style:{"max-width":"300px","max-height":"200px",border:"1px solid #ddd","border-radius":"4px"}},null,8,ze)]),_:1})):x("",!0)],64)):x("",!0),["passage_reading","dialogue","cloze"].includes(e.editingQuestion.type)?(u(),f(D,{key:1},[t(h,{label:"æ–‡ç« /å¯¹è¯å†…å®¹",prop:"passage"},{default:n(()=>[t(y,{modelValue:e.editingQuestion.passage,"onUpdate:modelValue":l[7]||(l[7]=i=>e.editingQuestion.passage=i),type:"textarea",placeholder:"è¯·è¾“å…¥å®Œæ•´çš„æ–‡ç« æˆ–å¯¹è¯å†…å®¹",rows:6,maxlength:"5000","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(h,{label:"æ–‡ç« æ ‡é¢˜",prop:"passage_title"},{default:n(()=>[t(y,{modelValue:e.editingQuestion.passage_title,"onUpdate:modelValue":l[8]||(l[8]=i=>e.editingQuestion.passage_title=i),placeholder:"è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰",maxlength:"200"},null,8,["modelValue"])]),_:1})],64)):x("",!0),t(h,{label:"é¢˜ç›®å†…å®¹",prop:"content"},{default:n(()=>[t(y,{modelValue:e.editingQuestion.content,"onUpdate:modelValue":l[9]||(l[9]=i=>e.editingQuestion.content=i),type:"textarea",placeholder:"è¯·è¾“å…¥é¢˜ç›®å†…å®¹",rows:4,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(h,{label:"HSKç­‰çº§",prop:"level"},{default:n(()=>[t(p,{modelValue:e.editingQuestion.level,"onUpdate:modelValue":l[10]||(l[10]=i=>e.editingQuestion.level=i),placeholder:"è¯·é€‰æ‹©HSKç­‰çº§",style:{width:"100%"}},{default:n(()=>[t(d,{label:"HSK 1çº§",value:1}),t(d,{label:"HSK 2çº§",value:2}),t(d,{label:"HSK 3çº§",value:3}),t(d,{label:"HSK 4çº§",value:4}),t(d,{label:"HSK 5çº§",value:5}),t(d,{label:"HSK 6çº§",value:6})]),_:1},8,["modelValue"]),l[33]||(l[33]=r("div",{style:{"margin-top":"4px","font-size":"12px",color:"#909399"}}," é€‰æ‹©é¢˜ç›®æ‰€å±žçš„HSKç­‰çº§ï¼ˆ1-6çº§ï¼‰ ",-1))]),_:1,__:[33]}),t(h,{label:"éš¾åº¦ç³»æ•°",prop:"difficulty"},{default:n(()=>[r("div",He,[t(A,{modelValue:e.editingQuestion.difficulty,"onUpdate:modelValue":l[11]||(l[11]=i=>e.editingQuestion.difficulty=i),max:5,"show-score":"","text-color":"#ff9900"},null,8,["modelValue"]),r("span",qe,v(e.getDifficultyText(e.editingQuestion.difficulty)),1)]),l[34]||(l[34]=r("div",{style:{"margin-top":"4px","font-size":"12px",color:"#909399"}}," é¢˜ç›®çš„éš¾åº¦ç³»æ•°ï¼ˆ1æ˜Ÿ=ç®€å•ï¼Œ5æ˜Ÿ=å›°éš¾ï¼‰ ",-1))]),_:1,__:[34]}),["single","multiple","reading"].includes(e.editingQuestion.type)?(u(),F(h,{key:2,label:"é€‰é¡¹ç±»åž‹"},{default:n(()=>[t(L,{modelValue:e.editingQuestion.option_type,"onUpdate:modelValue":l[12]||(l[12]=i=>e.editingQuestion.option_type=i)},{default:n(()=>[t(E,{value:"text"},{default:n(()=>l[35]||(l[35]=[g(" ðŸ“ æ–‡å­—é€‰é¡¹ ")])),_:1,__:[35]}),t(E,{value:"image"},{default:n(()=>l[36]||(l[36]=[g(" ðŸ–¼ï¸ å›¾ç‰‡é€‰é¡¹ ")])),_:1,__:[36]})]),_:1},8,["modelValue"]),r("div",De,[e.editingQuestion.option_type==="text"?(u(),f("span",Ae,"é€‰é¡¹å†…å®¹ä¸ºæ–‡å­—ï¼ˆå¦‚ï¼šA. è‹¹æžœ B. é¦™è•‰ï¼‰")):(u(),f("div",Oe,l[37]||(l[37]=[r("div",{style:{"font-weight":"600",color:"#409eff","margin-bottom":"4px"}}," ðŸ“¸ å›¾ç‰‡ä¸Šä¼ è¯´æ˜Ž ",-1),r("div",null,[g("â€¢ "),r("strong",null,"æŽ¨èå°ºå¯¸ï¼š"),g("400x400px æˆ– 600x600pxï¼ˆæ­£æ–¹å½¢ï¼‰")],-1),r("div",null,[g("â€¢ "),r("strong",null,"æ”¯æŒæ ¼å¼ï¼š"),g("JPGã€PNGã€GIFã€WebP")],-1),r("div",null,[g("â€¢ "),r("strong",null,"æœ¬åœ°è·¯å¾„ï¼š"),g("/media/images/option_a.jpg")],-1),r("div",null,[g("â€¢ "),r("strong",null,"å¤–éƒ¨é“¾æŽ¥ï¼š"),g("https://example.com/image.png")],-1),r("div",{style:{"margin-top":"4px",color:"#67c23a"}}," âœ“ ç³»ç»Ÿä¼šè‡ªåŠ¨ç¼©æ”¾é€‚é…ï¼Œæ— éœ€æ‹…å¿ƒå°ºå¯¸ä¸ç¬¦ ",-1)])))])]),_:1})):x("",!0),["single","multiple","reading"].includes(e.editingQuestion.type)?(u(),F(h,{key:3,label:"é€‰é¡¹",prop:"options"},{default:n(()=>[r("div",Ue,[(u(!0),f(D,null,B(e.parsedOptions,(i,m)=>(u(),f("div",{key:m,class:"option-item"},[r("div",Ie,[r("span",Ee,v(["A","B","C","D"][m]||m)+":",1),t(y,{modelValue:e.parsedOptions[m],"onUpdate:modelValue":V=>e.parsedOptions[m]=V,placeholder:e.editingQuestion.option_type==="image"?m===0?"å¯è¾“å…¥æœ¬åœ°è·¯å¾„æˆ–å¤–éƒ¨é“¾æŽ¥":`é€‰é¡¹ ${["A","B","C","D"][m]} å›¾ç‰‡URL`:`é€‰é¡¹ ${["A","B","C","D"][m]}`,style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t(_,{type:"danger",circle:"",icon:e.Delete,onClick:V=>e.removeOption(m),size:"small"},null,8,["icon","onClick"])]),e.editingQuestion.option_type==="image"&&e.parsedOptions[m]?(u(),f("div",Te,[t(I,{placement:"right",width:300,trigger:"hover"},{reference:n(()=>[r("div",Be,[r("img",{src:e.parsedOptions[m],onError:l[13]||(l[13]=(...V)=>e.handleImageError&&e.handleImageError(...V)),alt:"é¢„è§ˆ"},null,40,je),r("div",Pe,[t(C,null,{default:n(()=>[t(R)]),_:1})])])]),default:n(()=>[r("div",Ne,[r("img",{src:e.parsedOptions[m],style:{width:"100%","border-radius":"4px"},alt:"å¤§å›¾é¢„è§ˆ"},null,8,Le)])]),_:2},1024)])):x("",!0)]))),128)),t(_,{type:"primary",onClick:e.addOption,icon:e.Plus},{default:n(()=>l[38]||(l[38]=[g("æ·»åŠ é€‰é¡¹")])),_:1,__:[38]},8,["onClick","icon"])])]),_:1})):x("",!0),t(h,{label:"æ­£ç¡®ç­”æ¡ˆ",prop:"answer"},{default:n(()=>[t(y,{modelValue:e.editingQuestion.answer,"onUpdate:modelValue":l[14]||(l[14]=i=>e.editingQuestion.answer=i),placeholder:"è¯·è¾“å…¥æ­£ç¡®ç­”æ¡ˆ",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}const Ge=te(_e,[["render",Me],["__scopeId","data-v-5e93e78f"]]);export{Ge as default};
