# 修复证书路径问题

## 问题原因

证书文件在主机上存在（`/home/hsk/ssl/tangxinhao.online/`），但容器内找不到（`/etc/nginx/ssl/tangxinhao.online/`）。

这是因为：
- `docker-compose.prod.yml` 中已经配置了 `./ssl:/etc/nginx/ssl:ro`
- 但容器是之前创建的，`docker restart` 不会重新应用 volume 映射
- 需要重新创建容器才能应用新的 volume 配置

## 解决方案

### 方法一：重新创建 Nginx 容器（推荐）

在 FinalShell 终端执行：

```bash
cd /home/hsk

# 停止并删除现有容器
docker stop hsk-nginx
docker rm hsk-nginx

# 重新创建容器（会应用新的 volume 映射）
docker compose -f docker-compose.prod.yml up -d nginx
```

### 方法二：使用 docker compose 重新创建

```bash
cd /home/hsk

# 停止 Nginx 服务
docker compose -f docker-compose.prod.yml stop nginx

# 删除容器
docker compose -f docker-compose.prod.yml rm -f nginx

# 重新创建并启动
docker compose -f docker-compose.prod.yml up -d nginx
```

## 验证修复

重新创建容器后，执行：

```bash
# 检查证书文件是否在容器内
docker exec hsk-nginx ls -la /etc/nginx/ssl/tangxinhao.online/
```

应该看到：
```
cert.pem
cert.key
```

然后测试 HTTPS：
```bash
# 检查 Nginx 配置
docker exec hsk-nginx nginx -t

# 查看日志
docker logs hsk-nginx --tail 20
```

## 如果还是不行

检查 docker-compose.prod.yml 中的 volume 映射：

```bash
cat docker-compose.prod.yml | grep -A 10 "nginx:"
```

确认有这一行：
```yaml
- ./ssl:/etc/nginx/ssl:ro
```
