# 修复网络问题

## 问题

容器创建成功，但无法加入 `hsk-network` 网络，因为该网络不存在。

## 解决方案

### 方法一：查找现有网络（推荐）

```bash
# 检查其他容器使用的网络
docker inspect hsk-backend | grep -A 10 "Networks"

# 或者查看所有网络
docker network ls
```

### 方法二：创建网络

如果网络确实不存在，创建它：

```bash
docker network create hsk-network
```

### 方法三：使用现有网络

如果其他容器使用的是不同的网络，找到网络名称后：

```bash
# 停止并删除容器
docker stop hsk-nginx
docker rm hsk-nginx

# 使用正确的网络名称重新创建
docker run -d \
  --name hsk-nginx \
  --restart always \
  -p 80:80 \
  -p 443:443 \
  -v /home/hsk/nginx/nginx.conf:/etc/nginx/nginx.conf:ro \
  -v /home/hsk/nginx/conf.d:/etc/nginx/conf.d:ro \
  -v /home/hsk/ssl:/etc/nginx/ssl:ro \
  -v /home/hsk/certbot/www:/var/www/certbot:ro \
  -v /home/hsk/certbot/conf:/etc/letsencrypt:ro \
  -v /home/hsk/backend/media:/var/www/media:ro \
  -v /home/hsk/backend/static:/var/www/static:ro \
  --network 正确的网络名称 \
  nginx:alpine
```

### 方法四：不指定网络（临时方案）

如果网络问题复杂，可以先不指定网络，容器仍然可以工作（但可能无法与其他容器通信）：

```bash
# 停止并删除容器
docker stop hsk-nginx
docker rm hsk-nginx

# 不指定网络创建
docker run -d \
  --name hsk-nginx \
  --restart always \
  -p 80:80 \
  -p 443:443 \
  -v /home/hsk/nginx/nginx.conf:/etc/nginx/nginx.conf:ro \
  -v /home/hsk/nginx/conf.d:/etc/nginx/conf.d:ro \
  -v /home/hsk/ssl:/etc/nginx/ssl:ro \
  -v /home/hsk/certbot/www:/var/www/certbot:ro \
  -v /home/hsk/certbot/conf:/etc/letsencrypt:ro \
  -v /home/hsk/backend/media:/var/www/media:ro \
  -v /home/hsk/backend/static:/var/www/static:ro \
  nginx:alpine
```

## 验证

创建后执行：

```bash
# 1. 检查容器状态
docker ps | grep nginx

# 2. 检查证书文件
docker exec hsk-nginx ls -la /etc/nginx/ssl/tangxinhao.online/

# 应该看到：
# cert.pem
# cert.key
```
